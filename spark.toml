# Spark Configuration Example
# Copy this to your project root as 'spark.toml'

# REQUIRED: Basic app info
[app]
name = "my-app-name"      # Unique identifier for your app
version = "1.0.0"         # Version for tracking

# OPTIONAL: Build step (runs before starting)
[build]
command = "cargo build --release"

# CHOOSE ONE: Either [run] for services OR [web] for static sites

# For backend/API services
[run]
command = "./target/release/my-app"  # Command to start your app
port = 3000                          # Port (used by --auto-health flag)

# OPTIONAL: Custom health check (alternative to auto_health)
[health]
url = "http://localhost:3000/health" # Health check endpoint
timeout = 30                         # Timeout in seconds

# OR: Auto health check (alternative to [health])
auto_health = true                   # Auto-check main port if no [health]

# OPTIONAL: Process isolation
[isolation]
type = "systemd"                      # systemd, chroot, or none

# OPTIONAL: Auto database setup (postgres, mysql, sqlite)
[database]
type = "postgres"                     # Database type
name = "myapp_db"                     # Database name
user = "dbuser"                       # Database user
password = "secret"                   # Database password
port = 5432                           # Port to expose
preseed = "./db/init.sql"             # Optional: SQL file to run after setup

# Alternative for static websites (remove [run] if using this)
# [web]
# domain = "myapp.local"              # Domain name for access
# root = "./dist"                     # Folder with HTML files
